¡=
aD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Service\GestionarAlbumService.cs
	namespace

 	
Antara


 
.

 
Service

 
{ 
public 

class !
GestionarAlbumService &
:' ("
IGestionarAlbumService) ?
{ 
private 
readonly 
IAlbumRepository )
_albumRepository* :
;: ;
public !
GestionarAlbumService $
($ %
IAlbumRepository% 5
albumRepository6 E
)E F
{ 	
_albumRepository 
= 
albumRepository .
;. /
} 	
public 
async 
Task 

CrearAlbum $
($ %
Album% *
album+ 0
)0 1
{ 	
try 
{ 
await 
_albumRepository &
.& '

CrearAlbum' 1
(1 2
album2 7
)7 8
;8 9
} 
catch 
( 
	Exception 
err  
)  !
{ 
Console 
. 
Write 
( 
err !
.! "
Message" )
.) *
ToString* 2
(2 3
)3 4
)4 5
;5 6
throw   
;   
}!! 
}"" 	
public$$ 
Task$$ 
EliminarAlbum$$ !
($$! "
Guid$$" &
id$$' )
)$$) *
{%% 	
try&& 
{'' 
if(( 
((( 
id(( 
==(( 
Guid(( 
.(( 
Empty(( #
)((# $
{)) 
throw** 
new** !
ArgumentNullException** 3
(**3 4
nameof**4 :
(**: ;
id**; =
)**= >
,**> ?
$str**@ `
)**` a
;**a b
}++ 
return,, 
EliminarAlbumInner,, )
(,,) *
id,,* ,
),,, -
;,,- .
}-- 
catch.. 
(.. 
	Exception.. 
err..  
)..  !
{// 
Console00 
.00 
Write00 
(00 
err00 !
)00! "
;00" #
throw11 
;11 
}22 
}33 	
private55 
async55 
Task55 
EliminarAlbumInner55 -
(55- .
Guid55. 2
id553 5
)555 6
{66 	
await77 
_albumRepository77 "
.77" #
EliminarAlbum77# 0
(770 1
id771 3
)773 4
;774 5
}88 	
public;; 
Task;; 
<;; 
Album;; 
>;; 
ObtenerAlbum;; '
(;;' (
Guid;;( ,
id;;- /
);;/ 0
{<< 	
try== 
{>> 
if?? 
(?? 
id?? 
==?? 
Guid?? 
.?? 
Empty?? #
)??# $
{@@ 
throwAA 
newAA !
ArgumentNullExceptionAA 3
(AA3 4
nameofAA4 :
(AA: ;
idAA; =
)AA= >
,AA> ?
$strAA@ `
)AA` a
;AAa b
}BB 
returnCC 
ObtenerAlbumInnerCC (
(CC( )
idCC) +
)CC+ ,
;CC, -
}DD 
catchEE 
(EE 
	ExceptionEE 
errEE  
)EE  !
{FF 
ConsoleGG 
.GG 
WriteGG 
(GG 
errGG !
)GG! "
;GG" #
throwHH 
;HH 
}II 
}JJ 	
privateKK 
asyncKK 
TaskKK 
<KK 
AlbumKK  
>KK  !
ObtenerAlbumInnerKK" 3
(KK3 4
GuidKK4 8
idKK9 ;
)KK; <
{LL 	
returnMM 
awaitMM 
_albumRepositoryMM )
.MM) *
ObtenerAlbumMM* 6
(MM6 7
idMM7 9
)MM9 :
;MM: ;
}NN 	
publicPP 
TaskPP 
<PP 
ListPP 
<PP 
AlbumPP 
>PP 
>PP  (
ObtenerTodosAlbumesDeUsuarioPP! =
(PP= >
GuidPP> B
	usuarioIdPPC L
)PPL M
{QQ 	
trySS 
{TT 
ifUU 
(UU 
	usuarioIdUU 
==UU  
GuidUU! %
.UU% &
EmptyUU& +
)UU+ ,
{VV 
throwWW 
newWW !
ArgumentNullExceptionWW 3
(WW3 4
nameofWW4 :
(WW: ;
	usuarioIdWW; D
)WWD E
,WWE F
$strWWG g
)WWg h
;WWh i
}XX 
returnYY -
!ObtenerTodosAlbumesDeUsuarioInnerYY 8
(YY8 9
	usuarioIdYY9 B
)YYB C
;YYC D
}ZZ 
catch[[ 
([[ 
	Exception[[ 
err[[  
)[[  !
{\\ 
Console]] 
.]] 
Write]] 
(]] 
err]] !
)]]! "
;]]" #
throw^^ 
;^^ 
}__ 
}`` 	
privatebb 
asyncbb 
Taskbb 
<bb 
Listbb 
<bb  
Albumbb  %
>bb% &
>bb& '-
!ObtenerTodosAlbumesDeUsuarioInnerbb( I
(bbI J
GuidbbJ N
	usuarioIdbbO X
)bbX Y
{cc 	
returndd 
awaitdd 
_albumRepositorydd )
.dd) *(
ObtenerTodosAlbumesDeUsuariodd* F
(ddF G
	usuarioIdddG P
)ddP Q
;ddQ R
}ee 	
publichh 
asynchh 
Taskhh 
EditarAlbumhh %
(hh% &
Albumhh& +
albumhh, 1
)hh1 2
{ii 	
tryjj 
{kk 
awaitll 
_albumRepositoryll &
.ll& '
EditarAlbumll' 2
(ll2 3
albumll3 8
)ll8 9
;ll9 :
}mm 
catchnn 
(nn 
	Exceptionnn 
errnn  
)nn  !
{oo 
Consolepp 
.pp 
Writepp 
(pp 
errpp !
.pp! "
Messagepp" )
.pp) *
ToStringpp* 2
(pp2 3
)pp3 4
)pp4 5
;pp5 6
throwqq 
;qq 
}rr 
}ss 	
publicuu 
asyncuu 
Taskuu 
<uu 
booluu 
>uu 
PublicarAlbumuu  -
(uu- .
Albumuu. 3
albumuu4 9
)uu9 :
{vv 	
tryww 
{xx 
ifyy 
(yy 
!yy 
albumyy 
.yy 
EstaPublicadoyy '
)yy' (
{zz 
album{{ 
.{{ 
EstaPublicado{{ '
={{( )
true{{* .
;{{. /
album|| 
.|| 
FechaPublicacion|| *
=||+ ,
DateTime||- 5
.||5 6
Now||6 9
;||9 :
return}} 
await}}  
_albumRepository}}! 1
.}}1 2
PublicarAlbum}}2 ?
(}}? @
album}}@ E
)}}E F
;}}F G
}~~ 
throw 
new 
ArgumentException +
(+ ,
$str, U
)U V
;V W
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
err
ÅÅ  
)
ÅÅ  !
{
ÇÇ 
Console
ÉÉ 
.
ÉÉ 
Write
ÉÉ 
(
ÉÉ 
err
ÉÉ !
)
ÉÉ! "
;
ÉÉ" #
throw
ÑÑ 
;
ÑÑ 
}
ÖÖ 
}
ÜÜ 	
}
áá 
}àà Çd
aD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Service\GestionarPistaService.cs
	namespace		 	
Antara		
 
.		 
Service		 
{

 
public 

class !
GestionarPistaService &
:' ("
IGestionarPistaService) ?
{ 
private 
readonly 
IPistaRepository )
_pistaRepository* :
;: ;
private 
readonly 
IAlbumRepository )
_albumRepository* :
;: ;
public !
GestionarPistaService $
($ %
IPistaRepository% 5
pistaRepository6 E
,E F
IAlbumRepositoryG W
albumRepositoryX g
)g h
{ 	
_pistaRepository 
= 
pistaRepository .
;. /
_albumRepository 
= 
albumRepository .
;. /
} 	
public 
async 
Task 

CrearPista $
($ %
Pista% *
pista+ 0
)0 1
{ 	
try 
{ 
await 
_pistaRepository &
.& '

CrearPista' 1
(1 2
pista2 7
)7 8
;8 9
} 
catch 
( 
	Exception 
err  
)  !
{ 
Console 
. 
Write 
( 
err !
.! "
Message" )
)) *
;* +
throw 
; 
}   
}!! 	
public## 
Task## 
EliminarPista## !
(##! "
Guid##" &
id##' )
)##) *
{$$ 	
try%% 
{&& 
if'' 
('' 
id'' 
=='' 
Guid'' 
.'' 
Empty'' $
)''$ %
{(( 
throw)) 
new)) !
ArgumentNullException)) 3
())3 4
nameof))4 :
()): ;
id)); =
)))= >
,))> ?
$str))@ `
)))` a
;))a b
}** 
return++ 
EliminarPistaInner++ )
(++) *
id++* ,
)++, -
;++- .
},, 
catch-- 
(-- 
	Exception-- 
err--  
)--  !
{.. 
Console// 
.// 
Write// 
(// 
err// !
.//! "
Message//" )
)//) *
;//* +
throw00 
;00 
}11 
}22 	
private44 
async44 
Task44 
EliminarPistaInner44 -
(44- .
Guid44. 2
id443 5
)445 6
{55 	
await66 
_pistaRepository66 "
.66" #
EliminarPista66# 0
(660 1
id661 3
)663 4
;664 5
}77 	
public99 
async99 
Task99 
EditarPista99 %
(99% &
Pista99& +
pista99, 1
)991 2
{:: 	
try;; 
{<< 
await== 
_pistaRepository== &
.==& '
EditarPista==' 2
(==2 3
pista==3 8
)==8 9
;==9 :
}>> 
catch?? 
(?? 
	Exception?? 
err??  
)??  !
{@@ 
ConsoleAA 
.AA 
WriteAA 
(AA 
errAA !
.AA! "
MessageAA" )
)AA) *
;AA* +
throwBB 
;BB 
}CC 
}DD 	
publicFF 
TaskFF 
<FF 
PistaFF 
>FF 
ObtenerPistaFF '
(FF' (
GuidFF( ,
idFF- /
)FF/ 0
{GG 	
tryHH 
{II 
ifJJ 
(JJ 
idJJ 
==JJ 
GuidJJ 
.JJ 
EmptyJJ $
)JJ$ %
{KK 
throwLL 
newLL !
ArgumentNullExceptionLL 3
(LL3 4
nameofLL4 :
(LL: ;
idLL; =
)LL= >
,LL> ?
$strLL@ `
)LL` a
;LLa b
}MM 
returnNN 
ObtenerPistaInnerNN (
(NN( )
idNN) +
)NN+ ,
;NN, -
}OO 
catchPP 
(PP 
	ExceptionPP 
errPP  
)PP  !
{QQ 
ConsoleRR 
.RR 
WriteRR 
(RR 
errRR !
.RR! "
MessageRR" )
)RR) *
;RR* +
throwSS 
;SS 
}TT 
}UU 	
privateWW 
asyncWW 
TaskWW 
<WW 
PistaWW  
>WW  !
ObtenerPistaInnerWW" 3
(WW3 4
GuidWW4 8
idWW9 ;
)WW; <
{XX 	
returnYY 
awaitYY 
_pistaRepositoryYY )
.YY) *
ObtenerPistaYY* 6
(YY6 7
idYY7 9
)YY9 :
;YY: ;
}ZZ 	
public\\ 
Task\\ 
<\\ 
List\\ 
<\\ 
Pista\\ 
>\\ 
>\\  %
ObtenerTodosPistasDeAlbum\\! :
(\\: ;
Guid\\; ?
albumId\\@ G
)\\G H
{]] 	
try^^ 
{__ 
if`` 
(`` 
albumId`` 
==`` 
Guid`` #
.``# $
Empty``$ )
)``) *
{aa 
throwbb 
newbb !
ArgumentNullExceptionbb 3
(bb3 4
nameofbb4 :
(bb: ;
albumIdbb; B
)bbB C
,bbC D
$strbbE e
)bbe f
;bbf g
}cc 
returndd *
ObtenerTodosPistasDeAlbumInnerdd 5
(dd5 6
albumIddd6 =
)dd= >
;dd> ?
}ee 
catchff 
(ff 
	Exceptionff 
errff  
)ff  !
{gg 
Consolehh 
.hh 
Writehh 
(hh 
errhh !
.hh! "
Messagehh" )
)hh) *
;hh* +
throwii 
;ii 
}jj 
}kk 	
privateoo 
asyncoo 
Taskoo 
<oo 
Listoo 
<oo  
Pistaoo  %
>oo% &
>oo& '*
ObtenerTodosPistasDeAlbumInneroo( F
(ooF G
GuidooG K
albumIdooL S
)ooS T
{pp 	
returnqq 
awaitqq 
_pistaRepositoryqq )
.qq) *%
ObtenerTodosPistasDeAlbumqq* C
(qqC D
albumIdqqD K
)qqK L
;qqL M
}rr 	
publictt 
Tasktt 
<tt 
Listtt 
<tt 
Pistatt 
>tt 
>tt  (
ObtenerTodosPistasDePlaylisttt! =
(tt= >
Guidtt> B

playlistIdttC M
)ttM N
{uu 	
tryvv 
{ww 
ifxx 
(xx 

playlistIdxx 
==xx !
Guidxx" &
.xx& '
Emptyxx' ,
)xx, -
{yy 
throwzz 
newzz !
ArgumentNullExceptionzz 3
(zz3 4
nameofzz4 :
(zz: ;

playlistIdzz; E
)zzE F
,zzF G
$strzzH h
)zzh i
;zzi j
}{{ 
return|| -
!ObtenerTodosPistasDePlaylistInner|| 8
(||8 9

playlistId||9 C
)||C D
;||D E
}}} 
catch~~ 
(~~ 
	Exception~~ 
err~~  
)~~  !
{ 
Console
ÄÄ 
.
ÄÄ 
Write
ÄÄ 
(
ÄÄ 
err
ÄÄ !
.
ÄÄ! "
Message
ÄÄ" )
)
ÄÄ) *
;
ÄÄ* +
throw
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÉÉ 	
private
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
List
ÑÑ 
<
ÑÑ  
Pista
ÑÑ  %
>
ÑÑ% &
>
ÑÑ& '/
!ObtenerTodosPistasDePlaylistInner
ÑÑ( I
(
ÑÑI J
Guid
ÑÑJ N

playlistId
ÑÑO Y
)
ÑÑY Z
{
ÖÖ 	
return
ÜÜ 
await
ÜÜ 
_pistaRepository
ÜÜ )
.
ÜÜ) **
ObtenerTodosPistasDePlaylist
ÜÜ* F
(
ÜÜF G

playlistId
ÜÜG Q
)
ÜÜQ R
;
ÜÜR S
}
áá 	
public
ââ 
Task
ââ 
<
ââ 
List
ââ 
<
ââ 
Pista
ââ 
>
ââ 
>
ââ  
BuscarPistas
ââ! -
(
ââ- .
string
ââ. 4
cadena
ââ5 ;
)
ââ; <
{
ää 	
try
ãã 
{
åå 
if
çç 
(
çç 
cadena
çç 
==
çç 
null
çç "
)
çç" #
{
éé 
throw
èè 
new
èè #
ArgumentNullException
èè 3
(
èè3 4
nameof
èè4 :
(
èè: ;
cadena
èè; A
)
èèA B
,
èèB C
$str
èèD d
)
èèd e
;
èèe f
}
êê 
return
ëë  
BuscarPistassInner
ëë )
(
ëë) *
cadena
ëë* 0
)
ëë0 1
;
ëë1 2
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
err
ìì  
)
ìì  !
{
îî 
Console
ïï 
.
ïï 
Write
ïï 
(
ïï 
err
ïï !
.
ïï! "
Message
ïï" )
)
ïï) *
;
ïï* +
throw
ññ 
;
ññ 
}
óó 
}
òò 	
private
öö 
async
öö 
Task
öö 
<
öö 
List
öö 
<
öö  
Pista
öö  %
>
öö% &
>
öö& ' 
BuscarPistassInner
öö( :
(
öö: ;
string
öö; A
cadena
ööB H
)
ööH I
{
õõ 	
return
úú 
await
úú 
_pistaRepository
úú )
.
úú) *
BuscarPistass
úú* 7
(
úú7 8
cadena
úú8 >
)
úú> ?
;
úú? @
}
ùù 	
public
üü 
async
üü 
Task
üü 
ReproducirPista
üü )
(
üü) *
Pista
üü* /
pista
üü0 5
)
üü5 6
{
†† 	
try
°° 
{
¢¢ 
pista
££ 
.
££ "
AumentarReproduccion
££ *
(
££* +
)
££+ ,
;
££, -
await
§§ 
_pistaRepository
§§ &
.
§§& '
ReproducirPista
§§' 6
(
§§6 7
pista
§§7 <
.
§§< =
Id
§§= ?
,
§§? @
pista
§§A F
.
§§F G
Reproducciones
§§G U
)
§§U V
;
§§V W
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
err
¶¶  
)
¶¶  !
{
ßß 
Console
®® 
.
®® 
Write
®® 
(
®® 
err
®® !
.
®®! "
Message
®®" )
)
®®) *
;
®®* +
throw
©© 
;
©© 
}
™™ 
}
´´ 	
public
¨¨ 
bool
¨¨ 
SonDatosValidos
¨¨ #
(
¨¨# $
Pista
¨¨$ )
pista
¨¨* /
)
¨¨/ 0
{
≠≠ 	
try
ÆÆ 
{
ØØ 
Album
∞∞ 
album
∞∞ 
=
∞∞ 
_albumRepository
∞∞ .
.
∞∞. /
ObtenerAlbum
∞∞/ ;
(
∞∞; <
pista
∞∞< A
.
∞∞A B
AlbumId
∞∞B I
)
∞∞I J
.
∞∞J K
Result
∞∞K Q
;
∞∞Q R
if
±± 
(
±± 
album
±± 
==
±± 
null
±± !
)
±±! "
{
≤≤ 
throw
≥≥ 
new
≥≥ #
ArgumentNullException
≥≥ 3
(
≥≥3 4
nameof
≥≥4 :
(
≥≥: ;
pista
≥≥; @
)
≥≥@ A
)
≥≥A B
;
≥≥B C
}
¥¥ 
if
µµ 
(
µµ 
pista
µµ 
.
µµ !
EsValidoAnoCreacion
µµ ,
(
µµ, -
)
µµ- .
)
µµ. /
{
∂∂ 
return
∑∑ 
true
∑∑ 
;
∑∑  
}
∏∏ 
return
ππ 
false
ππ 
;
ππ 
}
∫∫ 
catch
ªª 
(
ªª 
	Exception
ªª 
err
ªª  
)
ªª  !
{
ºº 
Console
ΩΩ 
.
ΩΩ 
Write
ΩΩ 
(
ΩΩ 
err
ΩΩ !
.
ΩΩ! "
Message
ΩΩ" )
)
ΩΩ) *
;
ΩΩ* +
throw
ææ 
;
ææ 
}
øø 
}
¿¿ 	
}
¡¡ 
}¬¬ ‰R
dD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Service\GestionarPlaylistService.cs
	namespace

 	
Antara


 
.

 
Service

 
{ 
public 

class $
GestionarPlaylistService )
:* +%
IGestionarPlaylistService, E
{ 
private 
readonly 
IPlaylistRepository ,
_playlistRepository- @
;@ A
public $
GestionarPlaylistService '
(' (
IPlaylistRepository( ;
playlistRepository< N
)N O
{ 	
_playlistRepository 
=  !
playlistRepository" 4
;4 5
} 	
public 
Task 
< 
bool 
> !
AgregarPistaAPlaylist /
(/ 0
PlaylistPista0 =
playlistPista> K
)K L
{ 	
try 
{ 
if 
( 
playlistPista !
.! "

PlaylistId" ,
==- /
Guid0 4
.4 5
Empty5 :
||; =
playlistPista> K
.K L
PistaIdL S
==T V
GuidW [
.[ \
Empty\ a
)a b
{ 
throw 
new !
ArgumentNullException 3
(3 4
nameof4 :
(: ;
playlistPista; H
)H I
,I J
$strK k
)k l
;l m
} 
playlistPista 
. 
FechaRegistro +
=, -
DateTime. 6
.6 7
Now7 :
;: ;
return &
AgregarPistaAPlaylistInner 1
(1 2
playlistPista2 ?
)? @
;@ A
} 
catch 
( 
	Exception 
err  
)  !
{   
Console!! 
.!! 
Write!! 
(!! 
err!! !
)!!! "
;!!" #
throw"" 
;"" 
}## 
}$$ 	
private%% 
async%% 
Task%% 
<%% 
bool%% 
>%%  &
AgregarPistaAPlaylistInner%%! ;
(%%; <
PlaylistPista%%< I
playlistPista%%J W
)%%W X
{&& 	
return'' 
await'' 
_playlistRepository'' ,
.'', -!
AgregarPistaAPlaylist''- B
(''B C
playlistPista''C P
)''P Q
;''Q R
}(( 	
public** 
async** 
Task** 
CrearPlaylist** '
(**' (
Playlist**( 0
playlist**1 9
)**9 :
{++ 	
try,, 
{-- 
await.. 
_playlistRepository.. )
...) *
CrearPlaylist..* 7
(..7 8
playlist..8 @
)..@ A
;..A B
}// 
catch00 
(00 
	Exception00 
err00  
)00  !
{11 
Console22 
.22 
Write22 
(22 
err22 !
)22! "
;22" #
throw33 
;33 
}44 
}55 	
public77 
Task77 
EliminarPlaylist77 $
(77$ %
Guid77% )
id77* ,
)77, -
{88 	
try99 
{:: 
if;; 
(;; 
id;; 
==;; 
Guid;; 
.;; 
Empty;; $
);;$ %
{<< 
throw== 
new== !
ArgumentNullException== 3
(==3 4
nameof==4 :
(==: ;
id==; =
)=== >
,==> ?
$str==@ `
)==` a
;==a b
}>> 
return?? !
EliminarPlaylistInner?? ,
(??, -
id??- /
)??/ 0
;??0 1
}@@ 
catchAA 
(AA 
	ExceptionAA 
errAA  
)AA  !
{BB 
ConsoleCC 
.CC 
WriteCC 
(CC 
errCC !
)CC! "
;CC" #
throwDD 
;DD 
}EE 
}FF 	
privateHH 
asyncHH 
TaskHH !
EliminarPlaylistInnerHH 0
(HH0 1
GuidHH1 5
idHH6 8
)HH8 9
{II 	
awaitJJ 
_playlistRepositoryJJ %
.JJ% &
EliminarPlaylistJJ& 6
(JJ6 7
idJJ7 9
)JJ9 :
;JJ: ;
}KK 	
publicLL 
TaskLL 
<LL 
PlaylistLL 
>LL 
ObtenerPlaylistLL -
(LL- .
GuidLL. 2
idLL3 5
)LL5 6
{MM 	
tryNN 
{OO 
ifPP 
(PP 
idPP 
==PP 
GuidPP 
.PP 
EmptyPP $
)PP$ %
{QQ 
throwRR 
newRR !
ArgumentNullExceptionRR 3
(RR3 4
nameofRR4 :
(RR: ;
idRR; =
)RR= >
,RR> ?
$strRR@ `
)RR` a
;RRa b
}SS 
returnTT  
ObtenerPlaylistInnerTT +
(TT+ ,
idTT, .
)TT. /
;TT/ 0
}UU 
catchVV 
(VV 
	ExceptionVV 
errVV  
)VV  !
{WW 
ConsoleXX 
.XX 
WriteXX 
(XX 
errXX !
)XX! "
;XX" #
throwYY 
;YY 
}ZZ 
}[[ 	
private\\ 
async\\ 
Task\\ 
<\\ 
Playlist\\ #
>\\# $ 
ObtenerPlaylistInner\\% 9
(\\9 :
Guid\\: >
id\\? A
)\\A B
{]] 	
return^^ 
await^^ 
_playlistRepository^^ ,
.^^, -
ObtenerPlaylist^^- <
(^^< =
id^^= ?
)^^? @
;^^@ A
}__ 	
public`` 
Task`` 
<`` 
List`` 
<`` 
Playlist`` !
>``! "
>``" #)
ObtenerTodosPlaylistDeUsuario``$ A
(``A B
Guid``B F
	usuarioId``G P
)``P Q
{aa 	
trycc 
{dd 
ifee 
(ee 
	usuarioIdee 
==ee  
Guidee! %
.ee% &
Emptyee& +
)ee+ ,
{ff 
throwgg 
newgg !
ArgumentNullExceptiongg 3
(gg3 4
nameofgg4 :
(gg: ;
	usuarioIdgg; D
)ggD E
,ggE F
$strggG g
)ggg h
;ggh i
}hh 
returnii .
"ObtenerTodosPlaylistDeUsuarioInnerii 9
(ii9 :
	usuarioIdii: C
)iiC D
;iiD E
}jj 
catchkk 
(kk 
	Exceptionkk 
errkk  
)kk  !
{ll 
Consolemm 
.mm 
Writemm 
(mm 
errmm !
)mm! "
;mm" #
thrownn 
;nn 
}oo 
}pp 	
privateqq 
asyncqq 
Taskqq 
<qq 
Listqq 
<qq  
Playlistqq  (
>qq( )
>qq) *.
"ObtenerTodosPlaylistDeUsuarioInnerqq+ M
(qqM N
GuidqqN R
	usuarioIdqqS \
)qq\ ]
{rr 	
returnss 
awaitss 
_playlistRepositoryss ,
.ss, -)
ObtenerTodosPlaylistDeUsuarioss- J
(ssJ K
	usuarioIdssK T
)ssT U
;ssU V
}tt 	
publicuu 
Taskuu 
EditarPlaylistuu "
(uu" #
Playlistuu# +
playlistuu, 4
)uu4 5
{vv 	
tryww 
{xx 
returnyy 
EditarPlaylistInneryy *
(yy* +
playlistyy+ 3
)yy3 4
;yy4 5
}zz 
catch{{ 
({{ 
	Exception{{ 
err{{  
){{  !
{|| 
Console}} 
.}} 
Write}} 
(}} 
err}} !
)}}! "
;}}" #
throw~~ 
;~~ 
} 
}
ÄÄ 	
private
ÅÅ 
async
ÅÅ 
Task
ÅÅ !
EditarPlaylistInner
ÅÅ .
(
ÅÅ. /
Playlist
ÅÅ/ 7
playlist
ÅÅ8 @
)
ÅÅ@ A
{
ÇÇ 	
await
ÉÉ !
_playlistRepository
ÉÉ %
.
ÉÉ% &
EditarPlaylist
ÉÉ& 4
(
ÉÉ4 5
playlist
ÉÉ5 =
)
ÉÉ= >
;
ÉÉ> ?
}
ÑÑ 	
public
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
bool
ÖÖ 
>
ÖÖ #
QuitarPistaDePlaylist
ÖÖ /
(
ÖÖ/ 0
PlaylistPista
ÖÖ0 =
playlistPista
ÖÖ> K
)
ÖÖK L
{
ÜÜ 	
try
áá 
{
àà 
if
ââ 
(
ââ 
playlistPista
ââ !
.
ââ! "

PlaylistId
ââ" ,
==
ââ- /
Guid
ââ0 4
.
ââ4 5
Empty
ââ5 :
||
ââ; =
playlistPista
ââ> K
.
ââK L
PistaId
ââL S
==
ââT V
Guid
ââW [
.
ââ[ \
Empty
ââ\ a
)
ââa b
{
ää 
throw
ãã 
new
ãã #
ArgumentNullException
ãã 3
(
ãã3 4
nameof
ãã4 :
(
ãã: ;
playlistPista
ãã; H
)
ããH I
,
ããI J
$str
ããK k
)
ããk l
;
ããl m
}
åå 
return
çç (
QuitarPistaDePlaylistInner
çç 1
(
çç1 2
playlistPista
çç2 ?
)
çç? @
;
çç@ A
}
éé 
catch
èè 
(
èè 
	Exception
èè 
err
èè  
)
èè  !
{
êê 
Console
ëë 
.
ëë 
Write
ëë 
(
ëë 
err
ëë !
)
ëë! "
;
ëë" #
throw
íí 
;
íí 
}
ìì 
}
îî 	
private
ïï 
async
ïï 
Task
ïï 
<
ïï 
bool
ïï 
>
ïï  (
QuitarPistaDePlaylistInner
ïï! ;
(
ïï; <
PlaylistPista
ïï< I
playlistPista
ïïJ W
)
ïïW X
{
ññ 	
return
óó 
await
óó !
_playlistRepository
óó ,
.
óó, -#
QuitarPistaDePlaylist
óó- B
(
óóB C
playlistPista
óóC P
)
óóP Q
;
óóQ R
}
òò 	
}
ôô 
}öö ‚
XD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Service\LoginService.cs
	namespace 	
Antara
 
. 
Service 
{ 
public 

class 
LoginService 
: 
ILoginService +
{ 
private 
readonly 
IUsuarioRepository +
_usuarioRepo, 8
;8 9
private 
readonly 
IEncryptText %
_encryptText& 2
;2 3
public 
LoginService 
( 
IUsuarioRepository .
usuarioRepo/ :
,: ;
IEncryptText< H
encryptTextI T
)T U
{ 	
_usuarioRepo 
= 
usuarioRepo &
;& '
_encryptText 
= 
encryptText &
;& '
} 	
public 
Task 
< 
Usuario 
> 
Login "
(" #
string# )
email* /
,/ 0
string1 7
password8 @
)@ A
{ 	
try 
{ 
if 
( 
email 
== 
null !
)! "
{ 
throw 
new !
ArgumentNullException 3
(3 4
nameof4 :
(: ;
email; @
)@ A
,A B
$strC c
)c d
;d e
} 
else 
if 
( 
password  
==! #
null$ (
)( )
{   
throw!! 
new!! !
ArgumentNullException!! 3
(!!3 4
nameof!!4 :
(!!: ;
password!!; C
)!!C D
,!!D E
$str!!F f
)!!f g
;!!g h
}"" 
return## 

LoginInner## !
(##! "
email##" '
,##' (
password##) 1
)##1 2
;##2 3
}$$ 
catch%% 
(%% 
	Exception%% 
err%%  
)%%  !
{&& 
Console'' 
.'' 
Write'' 
('' 
err'' !
)''! "
;''" #
throw(( 
;(( 
})) 
}** 	
private,, 
async,, 
Task,, 
<,, 
Usuario,, "
>,," #

LoginInner,,$ .
(,,. /
string,,/ 5
email,,6 ;
,,,; <
string,,= C
password,,D L
),,L M
{-- 	
try.. 
{// 
Usuario00 
user00 
=00 
await00 $
_usuarioRepo00% 1
.001 2
Login002 7
(007 8
email008 =
)00= >
;00> ?
if11 
(11 
user11 
!=11 
null11  
)11  !
{22 
bool33 
pass33 
=33 
_encryptText33  ,
.33, -
CompararHash33- 9
(339 :
password33: B
,33B C
user33D H
.33H I
Password33I Q
)33Q R
;33R S
if44 
(44 
pass44 
)44 
{55 
return66 
_usuarioRepo66 +
.66+ ,
ObtenerUsuario66, :
(66: ;
user66; ?
.66? @
Id66@ B
)66B C
.66C D
Result66D J
;66J K
}77 
}88 
return99 
null99 
;99 
}:: 
catch;; 
(;; 
	Exception;; 
e;; 
);; 
{<< 
Console== 
.== 
Write== 
(== 
e== 
)==  
;==  !
throw>> 
;>> 
}?? 
}@@ 	
}AA 
}BB ¢1
cD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Service\RegistrarUsuarioService.cs
	namespace

 	
Antara


 
.

 
Service

 
{ 
public 

class #
RegistrarUsuarioService (
:) *$
IRegistrarUsuarioService+ C
{ 
private 
readonly 
IUsuarioRepository +
_usuarioRepo, 8
;8 9
private 
readonly 
IEncryptText %
_encryptText& 2
;2 3
public #
RegistrarUsuarioService &
(& '
IUsuarioRepository' 9
usuarioRepo: E
,E F
IEncryptTextG S
encryptTextT _
)_ `
{ 	
_usuarioRepo 
= 
usuarioRepo &
;& '
_encryptText 
= 
encryptText &
;& '
} 	
public 
async 
Task 
CrearUsuario &
(& '
Usuario' .
usuario/ 6
)6 7
{ 	
try 
{ 
if 
( 
usuario 
. 
Tipo  
.  !
ToLower! (
(( )
)) *
==+ -
$str. 6
||7 9
usuario: A
.A B
TipoB F
.F G
ToLowerG N
(N O
)O P
==Q S
$strT \
)\ ]
{ 
if 
( 
EsEmailValido %
(% &
usuario& -
.- .
Email. 3
)3 4
.4 5
Result5 ;
); <
{ 
if 
( 
usuario #
.# $
Tipo$ (
.( )
ToLower) 0
(0 1
)1 2
==3 5
$str6 >
)> ?
{   
usuario!! #
.!!# $
Password!!$ ,
=!!- .
_encryptText!!/ ;
.!!; < 
GeneratePasswordHash!!< P
(!!P Q
usuario!!Q X
.!!X Y
Password!!Y a
)!!a b
;!!b c
}"" 
await## 
_usuarioRepo## *
.##* +
CrearUsuario##+ 7
(##7 8
usuario##8 ?
)##? @
;##@ A
return$$ 
;$$ 
}%% 
else&& 
{'' 
if(( 
((( 
usuario(( #
.((# $
Tipo(($ (
.((( )
ToLower(() 0
(((0 1
)((1 2
==((3 5
$str((6 >
)((> ?
{)) 
throw** !
new**" %
ArgumentException**& 7
(**7 8
$str**8 m
)**m n
;**n o
}++ 
else,, 
if,, 
(,,  !
usuario,,! (
.,,( )
Tipo,,) -
.,,- .
ToLower,,. 5
(,,5 6
),,6 7
==,,8 :
$str,,; C
),,C D
{-- 
return.. "
;.." #
}// 
}00 
}11 
}33 
catch44 
(44 
	Exception44 
err44  
)44  !
{55 
Console66 
.66 
Write66 
(66 
err66 !
)66! "
;66" #
throw77 
;77 
}88 
}99 	
public;; 
Task;; 
<;; 
Usuario;; 
>;; 
ObtenerUsuario;; +
(;;+ ,
Guid;;, 0
id;;1 3
);;3 4
{<< 	
try== 
{>> 
if?? 
(?? 
id?? 
==?? 
Guid?? 
.?? 
Empty?? $
)??$ %
{@@ 
throwAA 
newAA !
ArgumentNullExceptionAA 3
(AA3 4
nameofAA4 :
(AA: ;
idAA; =
)AA= >
,AA> ?
$strAA@ `
)AA` a
;AAa b
}BB 
returnCC 
ObtenerUsuarioInnerCC *
(CC* +
idCC+ -
)CC- .
;CC. /
}DD 
catchEE 
(EE 
	ExceptionEE 
errEE  
)EE  !
{FF 
ConsoleGG 
.GG 
WriteGG 
(GG 
errGG !
)GG! "
;GG" #
throwHH 
;HH 
}II 
}JJ 	
privateLL 
asyncLL 
TaskLL 
<LL 
UsuarioLL "
>LL" #
ObtenerUsuarioInnerLL$ 7
(LL7 8
GuidLL8 <
idLL= ?
)LL? @
{MM 	
returnNN 
awaitNN 
_usuarioRepoNN %
.NN% &
ObtenerUsuarioNN& 4
(NN4 5
idNN5 7
)NN7 8
;NN8 9
}OO 	
publicQQ 
TaskQQ 
<QQ 
boolQQ 
>QQ 
EsEmailValidoQQ '
(QQ' (
stringQQ( .
emailQQ/ 4
)QQ4 5
{RR 	
trySS 
{TT 
ifUU 
(UU 
emailUU 
==UU 
nullUU !
)UU! "
{VV 
throwWW 
newWW !
ArgumentNullExceptionWW 3
(WW3 4
nameofWW4 :
(WW: ;
emailWW; @
)WW@ A
,WWA B
$strWWC c
)WWc d
;WWd e
}XX 
returnYY 
EsEmailValidoInnerYY )
(YY) *
emailYY* /
)YY/ 0
;YY0 1
}ZZ 
catch[[ 
([[ 
	Exception[[ 
err[[  
)[[  !
{\\ 
Console]] 
.]] 
Write]] 
(]] 
err]] !
)]]! "
;]]" #
throw^^ 
;^^ 
}__ 
}`` 	
privatebb 
asyncbb 
Taskbb 
<bb 
Booleanbb "
>bb" #
EsEmailValidoInnerbb$ 6
(bb6 7
stringbb7 =
emailbb> C
)bbC D
{cc 	
returndd 
awaitdd 
_usuarioRepodd %
.dd% &
VerificarEmailUnicodd& 9
(dd9 :
emaildd: ?
)dd? @
;dd@ A
}ee 	
}ff 
}gg 