Ã 
\D:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Repository\Dapper\Dapper.cs
	namespace 	
Antara
 
. 

Repository 
. 
Dapper "
{ 
public 

class 
Dapper 
: 
IDapper !
{ 
private 
IDbConnection 

connection (
;( )
private 
readonly 
AppSettings $
settings% -
;- .
public 
Dapper 
( 
IOptions 
< 
AppSettings *
>* +
options, 3
)3 4
{ 	
settings 
= 
options 
. 
Value $
;$ %
} 	
public 
async 
Task 
< 
T 
> 
QueryWithReturn ,
<, -
T- .
>. /
(/ 0
string0 6
storedProcedure7 F
,F G
dynamicH O

parametersP Z
=[ \
null] a
)a b
{ 	
try 
{ 
using 
( 

connection !
=" #
new$ '
SqlConnection( 5
(5 6
settings6 >
.> ?
ConexionString? M
)M N
)N O
{ 
var 
result 
=  
await! &

connection' 1
.1 2

QueryAsync2 <
<< =
T= >
>> ?
(? @
storedProcedure@ O
,O P
paramQ V
:V W
(X Y
objectY _
)_ `

parameters` j
,j k
commandTypel w
:w x
CommandType	y Ñ
.
Ñ Ö
StoredProcedure
Ö î
)
î ï
;
ï ñ
return 
await !
Task" &
.& '
Run' *
(* +
(+ ,
), -
=>. 0

Enumerable1 ;
.; <
FirstOrDefault< J
<J K
TK L
>L M
(M N
resultN T
)T U
)U V
;V W
} 
}   
catch!! 
(!! 
	Exception!! 
err!!  
)!!  !
{"" 
Console## 
.## 
Write## 
(## 
err## !
)##! "
;##" #
throw$$ 
;$$ 
}%% 
}&& 	
public(( 
async(( 
Task(( 
<(( 
dynamic(( !
>((! "
Consulta((# +
<((+ ,
T((, -
>((- .
(((. /
string((/ 5#
procedimientoAlmacenado((6 M
,((M N
dynamic((O V

parametros((W a
=((b c
null((d h
)((h i
where((j o
T((p q
:((r s
class((t y
{)) 	
try** 
{++ 
using,, 
(,, 

connection,, !
=,," #
new,,$ '
SqlConnection,,( 5
(,,5 6
settings,,6 >
.,,> ?
ConexionString,,? M
),,M N
),,N O
{-- 
return.. 
await..  

connection..! +
...+ ,

QueryAsync.., 6
<..6 7
T..7 8
>..8 9
(..9 :#
procedimientoAlmacenado..: Q
,..Q R
param..S X
:..X Y
(..Z [
object..[ a
)..a b

parametros..b l
,..l m
commandType..n y
:..y z
CommandType	..{ Ü
.
..Ü á
StoredProcedure
..á ñ
)
..ñ ó
;
..ó ò
}// 
}00 
catch11 
(11 
	Exception11 
err11  
)11  !
{22 
Console33 
.33 
Write33 
(33 
err33 !
)33! "
;33" #
throw44 
;44 
}55 
}66 	
}77 
}88 ù
]D:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Repository\Dapper\IDapper.cs
	namespace 	
Antara
 
. 

Repository 
. 
Dapper "
{ 
public		 

	interface		 
IDapper		 
{

 
Task 
< 
T 
> 
QueryWithReturn 
<  
T  !
>! "
(" #
string# )
storedProcedure* 9
,9 :
dynamic; B

parametersC M
=N O
nullP T
)T U
;U V
Task 
< 
dynamic 
> 
Consulta 
< 
T  
>  !
(! "
string" (#
procedimientoAlmacenado) @
,@ A
dynamicB I

parametrosJ T
=U V
nullW [
)[ \
where] b
Tc d
:e f
classg l
;l m
} 
} ›T
pD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Repository\Repositories\AgrupacionRepository.cs
	namespace

 	
Antara


 
.

 

Repository

 
.

 
Repositories

 (
{ 
public 

class  
AgrupacionRepository %
:& '!
IAgrupacionRepository( =
{ 
private 
readonly 
IDapper  
_dapper! (
;( )
public  
AgrupacionRepository #
(# $
IDapper$ +
dapper, 2
)2 3
{ 	
_dapper 
= 
dapper 
; 
} 	
public 
async 
Task 
CreateAgrupacion *
(* +

Agrupacion+ 5

agrupacion6 @
)@ A
{ 	
try 
{ 
await 
_dapper 
. 
QueryWithReturn -
<- .

Agrupacion. 8
>8 9
(9 :
$str: L
,L M
newN Q
{ 
@Id 
= 

agrupacion $
.$ %
Id% '
,' (
@Name 
= 

agrupacion &
.& '
Name' +
,+ ,
@Description  
=! "

agrupacion# -
.- .
Description. 9
,9 :
@isPublished  
=! "

agrupacion# -
.- .
IsPublished. 9
,9 :
@PublicationDate $
=% &

agrupacion' 1
.1 2
PublicationDate2 A
,A B
@Type 
= 

agrupacion &
.& '
Type' +
,+ ,
@User_id 
= 

agrupacion )
.) *
User_id* 1
}   
)   
;   
}!! 
catch"" 
("" 
	Exception"" 
err""  
)""  !
{## 
Console$$ 
.$$ 
Write$$ 
($$ 
err$$ !
)$$! "
;$$" #
throw%% 
;%% 
}&& 
}'' 	
public)) 
async)) 
Task)) 
DeleteAgrupacion)) *
())* +
Guid))+ /
id))0 2
)))2 3
{** 	
try++ 
{,, 
await-- 
_dapper-- 
.-- 
QueryWithReturn-- -
<--- .
Usuario--. 5
>--5 6
(--6 7
$str--7 I
,--I J
new--K N
{.. 
@Id// 
=// 
id// 
}00 
)00 
;00 
}11 
catch22 
(22 
	Exception22 
err22  
)22  !
{33 
Console44 
.44 
Write44 
(44 
err44 !
)44! "
;44" #
throw55 
;55 
}66 
}77 	
public:: 
async:: 
Task:: 
UpdateAgrupacion:: *
(::* +

Agrupacion::+ 5

agrupacion::6 @
)::@ A
{;; 	
try<< 
{== 
await>> 
_dapper>> 
.>> 
QueryWithReturn>> -
<>>- .

Agrupacion>>. 8
>>>8 9
(>>9 :
$str>>: L
,>>L M
new>>N Q
{?? 
@Id@@ 
=@@ 

agrupacion@@ $
.@@$ %
Id@@% '
,@@' (
@NameAA 
=AA 

agrupacionAA &
.AA& '
NameAA' +
,AA+ ,
@DescriptionBB  
=BB! "

agrupacionBB# -
.BB- .
DescriptionBB. 9
,BB9 :
@isPublishedCC  
=CC! "

agrupacionCC# -
.CC- .
IsPublishedCC. 9
,CC9 :
@TypeDD 
=DD 

agrupacionDD &
.DD& '
TypeDD' +
}EE 
)EE 
;EE 
}FF 
catchGG 
(GG 
	ExceptionGG 
errGG  
)GG  !
{HH 
ConsoleII 
.II 
WriteII 
(II 
errII !
)II! "
;II" #
throwJJ 
;JJ 
}KK 
}LL 	
publicNN 
asyncNN 
TaskNN 
<NN 

AgrupacionNN $
>NN$ %
GetAgrupacionNN& 3
(NN3 4
GuidNN4 8
idNN9 ;
)NN; <
{OO 	
tryPP 
{QQ 
returnRR 
awaitRR 
_dapperRR $
.RR$ %
QueryWithReturnRR% 4
<RR4 5

AgrupacionRR5 ?
>RR? @
(RR@ A
$strRRA P
,RRP Q
newRRR U
{SS 
@IdTT 
=TT 
idTT 
,TT 
}UU 
)UU 
;UU 
}VV 
catchWW 
(WW 
	ExceptionWW 
errWW  
)WW  !
{XX 
ConsoleYY 
.YY 
WriteYY 
(YY 
errYY !
)YY! "
;YY" #
throwZZ 
;ZZ 
}[[ 
}\\ 	
public^^ 
async^^ 
Task^^ 
<^^ 
List^^ 
<^^ 

Agrupacion^^ )
>^^) *
>^^* +
GetAllAgrupacion^^, <
(^^< =
Guid^^= A
userId^^B H
)^^H I
{__ 	
try`` 
{aa 
returnbb 
awaitbb 
_dapperbb $
.bb$ %
Consultabb% -
<bb- .

Agrupacionbb. 8
>bb8 9
(bb9 :
$strbb: N
,bbN O
newbbP S
{cc 
@User_iddd 
=dd 
userIddd %
,dd% &
}ee 
)ee 
;ee 
}ff 
catchgg 
(gg 
	Exceptiongg 
errgg  
)gg  !
{hh 
Consoleii 
.ii 
Writeii 
(ii 
errii !
)ii! "
;ii" #
throwjj 
;jj 
}kk 
}ll 	
publicnn 
asyncnn 
Tasknn 
<nn 
boolnn 
>nn  
AddAudioToAgrupacionnn  4
(nn4 5
AgrupacionAudionn5 D
agrupacion_audionnE U
)nnU V
{oo 	
trypp 
{qq 
AgrupacionAudiorr 
responserr  (
=rr) *
awaitrr+ 0
_dapperrr1 8
.rr8 9
QueryWithReturnrr9 H
<rrH I
AgrupacionAudiorrI X
>rrX Y
(rrY Z
$strrrZ p
,rrp q
newrrr u
{ss 
@Agrupacion_idtt "
=tt# $
agrupacion_audiott% 5
.tt5 6
Agrupacion_idtt6 C
,ttC D
	@Audio_iduu 
=uu 
agrupacion_audiouu  0
.uu0 1
Audio_iduu1 9
,uu9 :
@RegistrationDatevv %
=vv& '
DateTimevv( 0
.vv0 1
Nowvv1 4
}ww 
)ww 
;ww 
ifxx 
(xx 
responsexx 
==xx 
nullxx #
)xx# $
{yy 
returnzz 
falsezz  
;zz  !
}{{ 
return|| 
true|| 
;|| 
}}} 
catch~~ 
(~~ 
	Exception~~ 
err~~  
)~~  !
{ 
Console
ÄÄ 
.
ÄÄ 
Write
ÄÄ 
(
ÄÄ 
err
ÄÄ !
)
ÄÄ! "
;
ÄÄ" #
throw
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
bool
ÖÖ 
>
ÖÖ '
RemoveAudioFromAgrupacion
ÖÖ  9
(
ÖÖ9 :
Guid
ÖÖ: >
agrupacionId
ÖÖ? K
,
ÖÖK L
Guid
ÖÖM Q
audioId
ÖÖR Y
)
ÖÖY Z
{
ÜÜ 	
try
áá 
{
àà 
int
ââ 
	resultado
ââ 
=
ââ 
await
ââ  %
_dapper
ââ& -
.
ââ- .
QueryWithReturn
ââ. =
<
ââ= >
int
ââ> A
>
ââA B
(
ââB C
$str
ââC ^
,
ââ^ _
new
ââ` c
{
ää 
@Agrupacion_id
ãã "
=
ãã# $
agrupacionId
ãã% 1
,
ãã1 2
	@Audio_id
åå 
=
åå 
audioId
åå  '
}
çç 
)
çç 
;
çç 
if
éé 
(
éé 
	resultado
éé 
==
éé 
$num
éé  !
)
éé! "
{
èè 
return
êê 
true
êê 
;
êê  
}
ëë 
return
íí 
false
íí 
;
íí 
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
err
îî  
)
îî  !
{
ïï 
Console
ññ 
.
ññ 
Write
ññ 
(
ññ 
err
ññ !
)
ññ! "
;
ññ" #
throw
óó 
;
óó 
}
òò 
}
ôô 	
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
bool
õõ 
>
õõ 
Publish
õõ  '
(
õõ' (

Agrupacion
õõ( 2

agrupacion
õõ3 =
)
õõ= >
{
úú 	
try
ùù 
{
ûû 
int
üü 
	resultado
üü 
=
üü 
await
üü  %
_dapper
üü& -
.
üü- .
QueryWithReturn
üü. =
<
üü= >
int
üü> A
>
üüA B
(
üüB C
$str
üüC L
,
üüL M
new
üüN Q
{
†† 
@Id
°° 
=
°° 

agrupacion
°° $
.
°°$ %
Id
°°% '
,
°°' (
@isPublished
¢¢  
=
¢¢! "

agrupacion
¢¢# -
.
¢¢- .
IsPublished
¢¢. 9
,
¢¢9 :
@PublicationDate
££ $
=
££% &

agrupacion
££' 1
.
££1 2
PublicationDate
££2 A
}
§§ 
)
§§ 
;
§§ 
if
•• 
(
•• 
	resultado
•• 
==
••  
$num
••! "
)
••" #
{
¶¶ 
return
ßß 
true
ßß 
;
ßß  
}
®® 
return
©© 
false
©© 
;
©© 
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´ 
err
´´  
)
´´  !
{
¨¨ 
Console
≠≠ 
.
≠≠ 
Write
≠≠ 
(
≠≠ 
err
≠≠ !
)
≠≠! "
;
≠≠" #
throw
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 	
}
±± 
}≤≤ √S
kD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Repository\Repositories\AudioRepository.cs
	namespace

 	
Antara


 
.

 

Repository

 
.

 
Repositories

 (
{ 
public 

class 
AudioRepository  
:! "
IAudioRepository# 3
{ 
private 
readonly 
IDapper  
_dapper! (
;( )
public 
AudioRepository 
( 
IDapper &
dapper' -
)- .
{ 	
_dapper 
= 
dapper 
; 
} 	
public 
async 
Task 
< 
bool 
> 
CheckUniqueUrl  .
(. /
string/ 5
url6 9
)9 :
{ 	
try 
{ 
Audio 
response 
=  
await! &
_dapper' .
.. /
QueryWithReturn/ >
<> ?
Audio? D
>D E
(E F
$strF V
,V W
newX [
{ 
@Url 
= 
url 
} 
) 
; 
if 
( 
response 
== 
null  $
)$ %
{ 
return 
true 
;  
}   
return!! 
false!! 
;!! 
}"" 
catch## 
(## 
	Exception## 
err##  
)##  !
{$$ 
Console%% 
.%% 
Write%% 
(%% 
err%% !
.%%! "
Message%%" )
)%%) *
;%%* +
throw&& 
;&& 
}'' 
}(( 	
public** 
async** 
Task** 
CreateAudio** %
(**% &
Audio**& +
audio**, 1
)**1 2
{++ 	
try,, 
{-- 
await.. 
_dapper.. 
... 
QueryWithReturn.. -
<..- .
Audio... 3
>..3 4
(..4 5
$str..5 B
,..B C
new..D G
{// 
@Id00 
=00 
audio00 
.00  
Id00  "
,00" #
@Url11 
=11 
audio11  
.11  !
Url11! $
,11$ %
@Name22 
=22 
audio22 !
.22! "
Name22" &
,22& '
@RegistrationDate33 %
=33& '
audio33( -
.33- .
RegistrationDate33. >
,33> ?
@CreationYear44 !
=44" #
audio44$ )
.44) *
CreationYear44* 6
,446 7
@Interpreter55  
=55! "
audio55# (
.55( )
Interpreter55) 4
,554 5
@Writer66 
=66 
audio66 #
.66# $
Writer66$ *
,66* +
	@Producer77 
=77 
audio77  %
.77% &
Producer77& .
,77. /
@Reproductions88 "
=88# $
audio88% *
.88* +
Reproductions88+ 8
,888 9

@Genero_id99 
=99  
audio99! &
.99& '
	Genero_id99' 0
,990 1
@User_id:: 
=:: 
audio:: $
.::$ %
User_id::% ,
};; 
);; 
;;; 
}<< 
catch== 
(== 
	Exception== 
err==  
)==  !
{>> 
Console?? 
.?? 
Write?? 
(?? 
err?? !
.??! "
Message??" )
)??) *
;??* +
throw@@ 
;@@ 
}AA 
}BB 	
publicDD 
asyncDD 
TaskDD 
DeleteAudioDD %
(DD% &
GuidDD& *
idDD+ -
)DD- .
{EE 	
tryFF 
{GG 
awaitHH 
_dapperHH 
.HH 
QueryWithReturnHH -
<HH- .
dynamicHH. 5
>HH5 6
(HH6 7
$strHH7 D
,HHD E
newHHF I
{II 
@IdJJ 
=JJ 
idJJ 
}KK 
)KK 
;KK 
}LL 
catchMM 
(MM 
	ExceptionMM 
errMM  
)MM  !
{NN 
ConsoleOO 
.OO 
WriteOO 
(OO 
errOO !
.OO! "
MessageOO" )
)OO) *
;OO* +
throwPP 
;PP 
}QQ 
}RR 	
publicUU 
asyncUU 
TaskUU 
UpdateAudioUU %
(UU% &
AudioUU& +
audioUU, 1
)UU1 2
{VV 	
tryWW 
{XX 
awaitYY 
_dapperYY 
.YY 
QueryWithReturnYY -
<YY- .
dynamicYY. 5
>YY5 6
(YY6 7
$strYY7 D
,YYD E
newYYF I
{ZZ 
@Id[[ 
=[[ 
audio[[ 
.[[  
Id[[  "
,[[" #
@Url\\ 
=\\ 
audio\\  
.\\  !
Url\\! $
,\\$ %
@Name]] 
=]] 
audio]] !
.]]! "
Name]]" &
,]]& '
@CreationYear^^ !
=^^" #
audio^^$ )
.^^) *
CreationYear^^* 6
,^^6 7
@Interpreter__  
=__! "
audio__# (
.__( )
Interpreter__) 4
,__4 5
@Writer`` 
=`` 
audio`` #
.``# $
Writer``$ *
,``* +
	@Produceraa 
=aa 
audioaa  %
.aa% &
Produceraa& .
,aa. /

@Genero_idbb 
=bb  
audiobb! &
.bb& '
	Genero_idbb' 0
}cc 
)cc 
;cc 
}dd 
catchff 
(ff 
	Exceptionff 
errff  
)ff  !
{gg 
Consolehh 
.hh 
Writehh 
(hh 
errhh !
.hh! "
Messagehh" )
)hh) *
;hh* +
throwii 
;ii 
}jj 
}kk 	
publicmm 
asyncmm 
Taskmm 
<mm 
Audiomm 
>mm  
GetAudiomm! )
(mm) *
Guidmm* .
idmm/ 1
)mm1 2
{nn 	
tryoo 
{pp 
returnqq 
awaitqq 
_dapperqq $
.qq$ %
QueryWithReturnqq% 4
<qq4 5
Audioqq5 :
>qq: ;
(qq; <
$strqq< F
,qqF G
newqqH K
{rr 
@Idss 
=ss 
idss 
}tt 
)tt 
;tt 
}uu 
catchvv 
(vv 
	Exceptionvv 
errvv  
)vv  !
{ww 
Consolexx 
.xx 
Writexx 
(xx 
errxx !
.xx! "
Messagexx" )
)xx) *
;xx* +
throwyy 
;yy 
}zz 
}{{ 	
public}} 
async}} 
Task}} 
<}} 
List}} 
<}} 
Audio}} $
>}}$ %
>}}% &
GetAllAudio}}' 2
(}}2 3
Guid}}3 7
agrupacionId}}8 D
)}}D E
{~~ 	
try 
{
ÄÄ 
var
ÅÅ 

audiosList
ÅÅ 
=
ÅÅ  
await
ÅÅ! &
_dapper
ÅÅ' .
.
ÅÅ. /
Consulta
ÅÅ/ 7
<
ÅÅ7 8
Audio
ÅÅ8 =
>
ÅÅ= >
(
ÅÅ> ?
$str
ÅÅ? M
,
ÅÅM N
new
ÅÅO R
{
ÇÇ 
@Agrupacion_id
ÉÉ "
=
ÉÉ# $
agrupacionId
ÉÉ% 1
}
ÑÑ 
)
ÑÑ 
;
ÑÑ 
return
ÖÖ 

audiosList
ÖÖ !
;
ÖÖ! "
}
ÜÜ 
catch
áá 
(
áá 
	Exception
áá 
err
áá  
)
áá  !
{
àà 
Console
ââ 
.
ââ 
Write
ââ 
(
ââ 
err
ââ !
.
ââ! "
Message
ââ" )
)
ââ) *
;
ââ* +
throw
ää 
;
ää 
}
ãã 
}
åå 	
public
èè 
async
èè 
Task
èè 
<
èè 
List
èè 
<
èè 
Audio
èè $
>
èè$ %
>
èè% &
SearchAudios
èè' 3
(
èè3 4
string
èè4 :
cadena
èè; A
)
èèA B
{
êê 	
try
ëë 
{
íí 
var
ìì 

audiosList
ìì 
=
ìì  
await
ìì! &
_dapper
ìì' .
.
ìì. /
Consulta
ìì/ 7
<
ìì7 8
Audio
ìì8 =
>
ìì= >
(
ìì> ?
$str
ìì? M
,
ììM N
new
ììO R
{
îî 
@Cad
ïï 
=
ïï 
cadena
ïï !
}
ññ 
)
ññ 
;
ññ 
return
óó 

audiosList
óó !
;
óó! "
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
err
ôô  
)
ôô  !
{
öö 
Console
õõ 
.
õõ 
Write
õõ 
(
õõ 
err
õõ !
.
õõ! "
Message
õõ" )
)
õõ) *
;
õõ* +
throw
úú 
;
úú 
}
ùù 
}
ûû 	
public
†† 
async
†† 
Task
†† 
ReproducirAudio
†† )
(
††) *
Guid
††* .
id
††/ 1
,
††1 2
int
††3 6
reproductions
††7 D
)
††D E
{
°° 	
try
¢¢ 
{
££ 
await
§§ 
_dapper
§§ 
.
§§ 
QueryWithReturn
§§ -
<
§§- .
Audio
§§. 3
>
§§3 4
(
§§4 5
$str
§§5 F
,
§§F G
new
§§H K
{
•• 
@Id
¶¶ 
=
¶¶ 
id
¶¶ 
,
¶¶ 
@Reproductions
ßß "
=
ßß# $
reproductions
ßß% 2
}
®® 
)
®® 
;
®® 
}
©© 
catch
™™ 
(
™™ 
	Exception
™™ 
err
™™  
)
™™  !
{
´´ 
Console
¨¨ 
.
¨¨ 
Write
¨¨ 
(
¨¨ 
err
¨¨ !
.
¨¨! "
Message
¨¨" )
)
¨¨) *
;
¨¨* +
throw
≠≠ 
;
≠≠ 
}
ÆÆ 
}
ØØ 	
}
∞∞ 
}±± ¬5
mD:\UPN\9no\CAPSTONE\Proyecto\AntaraSoft\antara\AntaraSoft\Antara.Repository\Repositories\UsuarioRepository.cs
	namespace 	
Antara
 
. 

Repository 
. 
Repositories (
{ 
public		 

class		 
UsuarioRepository		 "
:		# $
IUsuarioRepository		% 7
{

 
private 
readonly 
IDapper  
_dapper! (
;( )
public 
UsuarioRepository  
(  !
IDapper! (
dapper) /
)/ 0
{ 	
_dapper 
= 
dapper 
; 
} 	
public 
async 
Task 
< 
Boolean !
>! "
CheckUniqueEmail# 3
(3 4
string4 :
email; @
)@ A
{ 	
try 
{ 
Usuario 
response  
=! "
await# (
_dapper) 0
.0 1
QueryWithReturn1 @
<@ A
UsuarioA H
>H I
(I J
$strJ \
,\ ]
new^ a
{ 
@Email 
= 
email "
} 
) 
; 
if 
( 
response 
== 
null  $
)$ %
{ 
return 
true 
;  
} 
return 
false 
; 
} 
catch 
( 
	Exception 
err  
)  !
{   
Console!! 
.!! 
Write!! 
(!! 
err!! !
)!!! "
;!!" #
throw"" 
;"" 
}## 
}$$ 	
public&& 
async&& 
Task&& 
CreateUsuario&& '
(&&' (
Usuario&&( /
usuario&&0 7
)&&7 8
{'' 	
try(( 
{)) 
await** 
_dapper** 
.** 
QueryWithReturn** -
<**- .
Usuario**. 5
>**5 6
(**6 7
$str**7 F
,**F G
new**H K
{++ 
@Id,, 
=,, 
usuario,, !
.,,! "
Id,," $
,,,$ %
@Email-- 
=-- 
usuario-- $
.--$ %
Email--% *
,--* +
	@Password.. 
=.. 
usuario..  '
...' (
Password..( 0
,..0 1
@Name// 
=// 
usuario// #
.//# $
Name//$ (
,//( )

@BirthDate00 
=00  
usuario00! (
.00( )
	BirthDate00) 2
,002 3
@Gender11 
=11 
usuario11 %
.11% &
Gender11& ,
,11, -
@Active22 
=22 
usuario22 %
.22% &
Active22& ,
,22, -
@RegistrationDate33 %
=33& '
usuario33( /
.33/ 0
RegistrationDate330 @
,33@ A
@Country44 
=44 
usuario44 &
.44& '
Country44' .
}55 
)55 
;55 
}66 
catch77 
(77 
	Exception77 
err77  
)77  !
{88 
Console99 
.99 
Write99 
(99 
err99 !
)99! "
;99" #
throw:: 
;:: 
};; 
}<< 	
public>> 
Task>> !
PhysicalDeleteUsuario>> )
(>>) *
Guid>>* .
id>>/ 1
)>>1 2
{?? 	
try@@ 
{AA 
ifBB 
(BB 
idBB 
==BB 
GuidBB 
.BB 
EmptyBB $
)BB$ %
{CC 
throwDD 
newDD !
ArgumentNullExceptionDD 3
(DD3 4
nameofDD4 :
(DD: ;
idDD; =
)DD= >
,DD> ?
$strDD@ `
)DD` a
;DDa b
}EE 
returnFF &
PhysicalDeleteUsuarioInnerFF 1
(FF1 2
idFF2 4
)FF4 5
;FF5 6
}GG 
catchHH 
(HH 
	ExceptionHH 
errHH  
)HH  !
{II 
ConsoleJJ 
.JJ 
WriteJJ 
(JJ 
errJJ !
)JJ! "
;JJ" #
throwKK 
;KK 
}LL 
}MM 	
privateOO 
asyncOO 
TaskOO &
PhysicalDeleteUsuarioInnerOO 5
(OO5 6
GuidOO6 :
idOO; =
)OO= >
{PP 	
awaitQQ 
_dapperQQ 
.QQ 
QueryWithReturnQQ )
<QQ) *
UsuarioQQ* 1
>QQ1 2
(QQ2 3
$strQQ3 J
,QQJ K
newQQL O
{RR 
@IdSS 
=SS 
idSS 
}TT 
)TT 
;TT 
}UU 	
publicWW 
asyncWW 
TaskWW 
<WW 
UsuarioWW !
>WW! "

GetUsuarioWW# -
(WW- .
GuidWW. 2
idWW3 5
)WW5 6
{XX 	
tryYY 
{ZZ 
return[[ 
await[[ 
_dapper[[ $
.[[$ %
QueryWithReturn[[% 4
<[[4 5
Usuario[[5 <
>[[< =
([[= >
$str[[> J
,[[J K
new[[L O
{\\ 
@Id]] 
=]] 
id]] 
}^^ 
)^^ 
;^^ 
}__ 
catch`` 
(`` 
	Exception`` 
err``  
)``  !
{aa 
Consolebb 
.bb 
Writebb 
(bb 
errbb !
)bb! "
;bb" #
throwcc 
;cc 
}dd 
}ee 	
publicgg 
asyncgg 
Taskgg 
<gg 
Usuariogg !
>gg! "
Logingg# (
(gg( )
stringgg) /
emailgg0 5
)gg5 6
{hh 	
tryii 
{jj 
returnkk 
awaitkk 
_dapperkk $
.kk$ %
QueryWithReturnkk% 4
<kk4 5
Usuariokk5 <
>kk< =
(kk= >
$strkk> E
,kkE F
newkkG J
{ll 
@Emailmm 
=mm 
emailmm "
}nn 
)nn 
;nn 
}oo 
catchpp 
(pp 
	Exceptionpp 
errpp  
)pp  !
{qq 
Consolerr 
.rr 
Writerr 
(rr 
errrr !
)rr! "
;rr" #
throwss 
;ss 
}tt 
}uu 	
}vv 
}ww 